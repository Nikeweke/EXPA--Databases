(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{364:function(e,t,s){"use strict";s.r(t);var a=s(42),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"mongodb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongodb"}},[e._v("#")]),e._v(" Mongodb")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://robomongo.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Browser for db"),s("OutboundLink")],1),e._v(" "),s("a",{attrs:{href:"https://github.com/Nikeweke/Mongo-Node",target:"_blank",rel:"noopener noreferrer"}},[e._v("Example with Node"),s("OutboundLink")],1)]),e._v(" "),s("hr"),e._v(" "),s("h4",{attrs:{id:"содержание"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#содержание"}},[e._v("#")]),e._v(" Содержание")]),e._v(" "),s("ul",[s("li",[e._v("Install(Unix)")]),e._v(" "),s("li",[e._v("Install and start(Windows)")]),e._v(" "),s("li",[e._v("Top commands")]),e._v(" "),s("li",[e._v("Make user admin")]),e._v(" "),s("li",[e._v("Problem with built-in roles")]),e._v(" "),s("li",[e._v("Class MongoClient not found (php)")])]),e._v(" "),s("hr"),e._v(" "),s("h2",{attrs:{id:"install-unix"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install-unix"}},[e._v("#")]),e._v(" Install(Unix)")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 2930ADAE8CAF5059EE73BB4B58712A2291FA4AD5\necho "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.6 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-3.6.list\nsudo apt-get update\nsudo apt-get install -y mongodb-org\n')])])]),s("h2",{attrs:{id:"install-and-start-windows"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install-and-start-windows"}},[e._v("#")]),e._v(" Install and start(Windows)")]),e._v(" "),s("ul",[s("li",[e._v("Установить - https://www.mongodb.com/download-center?jmp=nav#community")]),e._v(" "),s("li",[e._v("Добавить в строку системных переменных "),s("strong",[e._v("Path")]),e._v(" путь к папке "),s("strong",[e._v("Mongodb\\bin")])]),e._v(" "),s("li",[e._v("в консоле запустить mongo daemon: "),s("code",[e._v("> mongod")])]),e._v(" "),s("li",[e._v("подключиться к БД shell: "),s("code",[e._v("> mongo")])])]),e._v(" "),s("h2",{attrs:{id:"top-commands"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#top-commands"}},[e._v("#")]),e._v(" Top commands")]),e._v(" "),s("ul",[s("li",[s("strong",[e._v("mongod")]),e._v(" - запуск БД демона")]),e._v(" "),s("li",[s("strong",[e._v("mongod --config C:\\path\\to\\Mongodb\\mongod.cfg")]),e._v(" - запустить mongo с настройками из файла")]),e._v(" "),s("li",[s("strong",[e._v("mongo")]),e._v(" - подсоедениться к БД оболочке(shell)")]),e._v(" "),s("li",[s("strong",[e._v("show databases")]),e._v(" - показать все БД")]),e._v(" "),s("li",[s("strong",[e._v("show collections")]),e._v(" - показать все коллекции")]),e._v(" "),s("li",[s("strong",[e._v("use db_name")]),e._v(" - переключиться на БД")]),e._v(" "),s("li",[s("strong",[e._v("sudo service mongod start(stop, restart)")]),e._v(" - действия с mongod")]),e._v(" "),s("li",[s("strong",[e._v("sudo service mongod status")]),e._v(" - посмотреть статус")]),e._v(" "),s("li",[s("strong",[e._v("mongo --port 27017")]),e._v(" - указать порт для подключения")]),e._v(" "),s("li",[s("strong",[e._v("mongo --host www.example.com:27017")]),e._v(" - указать порт и хост для подключения")])]),e._v(" "),s("h2",{attrs:{id:"commands-in-shell"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#commands-in-shell"}},[e._v("#")]),e._v(" Commands in Shell")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("use mydb\n\n# SELECT\ndb.users.find({})\n\n#SELECT with where\ndb.users.find({name: 'Alex'})\n\n# INSERT\ndb.users.save({name: 'Vasiliy'})\n\n# REMOVE where NAME\ndb.users.remove({email: 'Ivanko'})\n\n# UPDATE\ndb.users.update({password: 'asdasdd' }, {email: 'Ivanko'})\n\n")])])]),s("h2",{attrs:{id:"make-user-admin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#make-user-admin"}},[e._v("#")]),e._v(" Make user admin")]),e._v(" "),s("p",[e._v('Эти комманды создатут пользователя с им. "myAdmin", в папке "System > Users" и в папке "Collections > System > system.users" пользователя. С помощью "roles" можно дать права пользователю на определенные БД')]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("> mongo\n> use admin\n> db.createUser({user: 'myAdmin', pwd: '12345', roles: [{role:'dbOwner', db:'project'}]})\n")])])]),s("h2",{attrs:{id:"problem-with-built-in-roles"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#problem-with-built-in-roles"}},[e._v("#")]),e._v(" Problem with built-in roles")]),e._v(" "),s("p",[e._v("By default authentication on MongoDB disabled and this is a reason why built-in roles doesn't work.\nHow to fix it :\nEnable authentication in mongod configuration file")]),e._v(" "),s("p",[e._v("Open "),s("code",[e._v("/etc/mongod.conf")]),e._v(" with your favorite code editor and search for the following lines:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('security:\nauthorization: "enabled"\n')])])]),s("p",[e._v("and make restart for mongod service:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo service mongodb restart\n")])])]),s("p",[e._v("Create new user in mongodb and set read permission:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('db.createUser(\n{\nuser:"readonly",\npwd:"What ever you need",\nroles:[{role:"read",db:"Name of db for selected user"}]\n}\n)\n')])])]),s("h2",{attrs:{id:"class-mongoclient-not-found-php"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-mongoclient-not-found-php"}},[e._v("#")]),e._v(" Class MongoClient not found (php)")]),e._v(" "),s("p",[e._v("Добавить "),s("code",[e._v("extension=mongo.so")]),e._v(" в "),s("code",[e._v("/etc/php5/cli/php.ini")]),e._v(" & "),s("code",[e._v("/etc/php5/apache2/php.ini")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("sudo apt-get install php5.6-mongo\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);